<div class="header">
  <div class="row" style="margin-top: -16px">
    <div class="col-md-3"><label class="title-header ml-4">Missões</label></div>
    <div class="col-md-5">
      <div class="form-group">
        <input type="text" class="form-control" [(ngModel)]="filter" placeholder="Pesquiser missão...">
      </div>
    </div>
    <div class="col-md-4 text-right mt-2px">
      <div class="btn-group mr-4" role="group" aria-label="Basic example">
        <button *ngIf="!showingMyQuest" routerLink="/main" type="button" class="btn btn-sm btn-danger"><i class="mdi mdi-chevron-left"></i> Voltar</button>
        <!-- <button *ngIf="!showingMyQuest" (click)="showingMyQuest = true" type="button" class="btn btn-sm btn-warning"><i class="mdi mdi-flag-outline"></i>  Minhas missões</button>
        <button *ngIf="showingMyQuest" (click)="showingMyQuest = false" type="button" class="btn btn-sm btn-danger"><i class="mdi mdi-close"></i>  Missões</button> -->
      </div>
    </div>
  </div>
</div>
<div class="row content-wrapper">
  <div class="col-md-8 col-lg-8 grid-margin stretch-card">
    <div class="card scroll">
      <div class="card-body">
        <h4 class="card-title">
          <span>Missões disponíveis</span>
          <span><i class=" mdi mdi-arrow-expand text-muted pointer float-right"></i></span>
          <span><i class=" mdi mdi-replay text-muted pointer float-right pr-2"></i></span>
        </h4>
        <p class="card-description text-muted">Alcance novos níveis para desbloquear mais missões!</p>
        <div class="fluid-container pt-4" *ngIf="!showingMyQuest">
          <!-- LOADING -->
          <div *ngIf="loading">
            <div *ngFor="let skt of skeleton" class="row ticket-card pb-2 border-bottom pb-3 mb-3">
              <div class="col-md-1 mb-3"> 
                <div class="progress">
                  <div class="progress-bar bg-secondary progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <div class="col-md-10 mb-3"> 
                <div class="progress">
                  <div class="progress-bar bg-secondary progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <div class="col-md-1 mb-3"> 
                <div class="progress">
                  <div class="progress-bar bg-secondary progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
            </div>
          </div>
          <!-- LOADING -->
          <div *ngIf="!loading && questList != null && questList.length > 0" class="animated fadeIn">
            <div  *ngFor="let quest of questList | filter: filter; let i = index" class="row ticket-card pb-2 border-bottom pb-3 mb-3">
              <div class="col-md-1">
                <img class="img-sm rounded-circle mb-4 mb-md-0" src="https://static.vecteezy.com/system/resources/previews/000/351/281/non_2x/task-vector-icon.jpg" alt="profile image">
              </div>
              <div class="ticket-details col-md-9">
                <div class="d-flex">
                  <p class="text-dark font-weight-semibold mr-2 mb-0 no-wrap">{{quest?.title}}</p>
                  <p class="text-primary mr-1 mb-0">+{{quest?.xp}} xp</p>
                  <p class="text-success mb-0 ellipsis">+{{quest?.score}} pts</p>
                </div>
                <p class="text-gray ellipsis mb-2">{{quest?.description}}</p>
              </div>
              <!-- <div class="ticket-actions text-right col-md-2">
                <div class="btn-group dropdown">
                  <button type="button" class="btn btn-dark dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="mdi mdi-information-outline"></i>
                  </button>
                  <div class="dropdown-menu">
                    <a class="dropdown-item pointer">
                      <i class="fa fa-history fa-fw"></i>Detalhes
                    </a>
                    <div class="dropdown-divider"></div>
                    <a (click)="apply(quest)" class="dropdown-item pointer">
                      <i class="fa fa-check text-success fa-fw"></i>Aceitar
                    </a>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
          <div *ngIf="!loading && questList.length == 0" class="row ticket-card mt-5 pb-2 border-bottom pb-3 mb-3  animated fadeInRight">
            <h3 *ngIf="!hasServerError" class="mt-5 text-muted">Não há missões disponíveis</h3>
            <h3 *ngIf="hasServerError" class="mt-5 text-muted"><i class="mdi mdi-alert-octagon mr-1" aria-hidden="true"></i> Erro na conexão.</h3>
          </div>
        </div>
        <div *ngIf="showingMyQuest" class="fluid-container pt-4">
          <!-- LOADING -->
          <div *ngIf="loading">
            <div *ngFor="let skt of skeleton" class="row ticket-card pb-2 border-bottom pb-3 mb-3">
              <div class="col-md-1 mb-3"> 
                <div class="progress">
                  <div class="progress-bar bg-secondary progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <div class="col-md-10 mb-3"> 
                <div class="progress">
                  <div class="progress-bar bg-secondary progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <div class="col-md-1 mb-3"> 
                <div class="progress">
                  <div class="progress-bar bg-secondary progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
            </div>
          </div>
          <!-- LOADING -->
          <div *ngIf="!loading && myQuestList.length > 0">
            <div *ngFor="let quest of myQuestList | filter: filter; let i = index" class="row ticket-card pb-2 border-bottom pb-3 mb-3">
              <div class="col-md-1">
                  <img class="img-sm rounded-circle mb-4 mb-md-0" src="https://static.vecteezy.com/system/resources/previews/000/351/281/non_2x/task-vector-icon.jpg" alt="profile image">
                </div>
                <div class="ticket-details col-md-9">
                  <div class="d-flex">
                    <p class="text-dark font-weight-semibold mr-2 mb-0 no-wrap">{{quest?.title}}</p>
                    <p class="text-primary mr-1 mb-0">+{{quest?.xp}} xp</p>
                    <p class="text-success mb-0 ellipsis">+{{quest?.score}} pts</p>
                  </div>
                  <p class="text-gray ellipsis mb-2">{{quest?.description}}</p>
                </div>
                <div class="ticket-actions text-right col-md-2">
                  <div class="btn-group dropdown">
                    <button type="button" class="btn btn-dark dropdown-toggle btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="mdi mdi-information-outline"></i>
                    </button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item pointer">
                        <i class="fa fa-history fa-fw"></i>Detalhes
                      </a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item pointer">
                        <i class="fa fa-check text-success fa-fw"></i>Aceitar
                      </a>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          <div *ngIf="!loading && myQuestList.length == 0" class="row ticket-card mt-5 pb-2 border-bottom pb-3 mb-3">
            <h3 *ngIf="!hasServerError" class="mt-5 text-muted">Você não esta em nenhuma turma.</h3>
            <h3 *ngIf="hasServerError" class="mt-5 text-muted"><i class="mdi mdi-alert-octagon mr-1" aria-hidden="true"></i> Erro na conexão.</h3>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-4 max-heigth-400 animated fadeIn">
    <div>
      <div class="alert alert-info animated fadeIn fast" role="alert">
        <h4 class="alert-heading">Missões? o que é isso?</h4>
        <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
        <hr>
        <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
        <hr>
        <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
        <hr>
        <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
      </div>
    </div>
  </div>
</div>
